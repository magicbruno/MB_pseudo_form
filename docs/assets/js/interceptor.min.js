!function(i,r){class o{constructor(t=[]){this.list=t}list=[];get length(){return this.list.length}item(t){return this.list[t]}add(t,e){var s=this.indexOf(t);return-1==s?this.list.push({name:t,action:e}):this.list[s].action=e,-1===s}remove(t){t=this.indexOf(t);return-1<t&&this.list.splice(t,1),-1<t}indexOf(t){for(var e=0;e<this.list.length;e++)if(this.list[e].name===t)return e;return-1}getAction(t){t=this.indexOf(t);return-1<t?this.list[t].action:null}clear(){this.list.splice(0,this.list.length)}}i.Interceptor=class{constructor(t,e=[0,1],s="0px 0px 0px 0px"){this.watchList=new o,this.threshold=e,this.rootMargin=s;const r=this;i.IntersectionObserver?(this.observer=new IntersectionObserver(t=>{t.forEach(t=>{const e=t.target;var s=e.dataset.interceptor;const i=r.getAction(s);s=t.intersectionRatio;"function"==typeof i?i(e,s):0===s?e.classList.remove(i):s>=r.maxRatio&&e.classList.add(i)})},{rootMargin:this.rootMargin,threshold:this.threshold}),this.initObservation(t)):this.noObserver()}watchList=[];threshold=0;rootMargin="0px 0px 0px 0px";observer=null;get maxRatio(){if("number"==typeof this.threshold)return this.threshold;let e=0;for(let t=0;t<this.threshold.length;t++){var s=this.threshold[t];s>e&&(e=s)}return e}initObservation(e){for(let t=0;t<e.length;t++){var s=e[t];this.observe(s.name,s.action)}}getAction(t){return this.watchList.getAction(t)}noObserver(){for(let t=0;t<this.watchList.length;t++)this.watchList.item(t)}observe(t,e){const s=this;if(this.watchList.add(t,e)){const i=r.querySelectorAll(`[data-interceptor="${t}"]`);i.forEach(t=>{s.observer.observe(t)})}}disconnect(){this.watchList.clear(),this.observer.disconnect()}takeRecords(){return this.observer.takeRecords()}unobserve(t){const e=this;if(this.watchList.remove(t)){const s=r.querySelectorAll(`[data-interceptor="${t}"]`);s.forEach(t=>{e.observer.unobserve(t)})}}}}(window,document);